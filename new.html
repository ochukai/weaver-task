<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <title>New</title>

  <link rel="stylesheet" href="css/weui.min.css">
  <link rel="stylesheet" href="css/jquery-weui.css">
  <link rel="stylesheet" href="css/new.css">
</head>
<body ontouchstart>

<div class="weui-cells weui-cells_form">
  <div class="weui-cell">
    <div class="weui-cell__hd"><label class="weui-label">任务名称 *</label></div>
    <div class="weui-cell__bd">
      <input class="weui-input" type="text" placeholder="请输入任务名称">
    </div>
  </div>

  <div class="weui-cell weui-cell_vcode">
    <div class="weui-cell__hd"><label class="weui-label">上级任务</label></div>
    <div class="weui-cell__bd"><input class="weui-input" type="text" readonly></div>
    <div class="weui-cell__ft">
      <button class="weui-vcode-btn">选择</button>
    </div>
  </div>

  <div class="weui-cell">
    <div class="weui-cell__hd"><label class="weui-label">描述</label></div>
    <div class="weui-cell__bd">
      <textarea class="weui-textarea" rows="3" data-min-rows="3"></textarea>
    </div>
  </div>
</div>

<div class="weui-cells weui-cells_form">
  <div class="weui-cell weui-cell_vcode">
    <div class="weui-cell__hd"><label class="weui-label">责任人</label></div>
    <div class="weui-cell__bd"><input class="weui-input" type="text" readonly></div>
    <div class="weui-cell__ft">
      <button class="weui-vcode-btn">选择</button>
    </div>
  </div>
  <div class="weui-cell weui-cell_vcode">
    <div class="weui-cell__hd"><label class="weui-label">参与人</label></div>
    <div class="weui-cell__bd"><input class="weui-input" type="text" readonly></div>
    <div class="weui-cell__ft">
      <button class="weui-vcode-btn">选择</button>
    </div>
  </div>

  <div class="weui-cell weui-cell_vcode">
    <div class="weui-cell__hd"><label class="weui-label">共享人</label></div>
    <div class="weui-cell__bd"><input class="weui-input" type="text" readonly></div>
    <div class="weui-cell__ft">
      <button class="weui-vcode-btn">选择</button>
    </div>
  </div>
</div>


<div class="weui-cells weui-cells_form">
  <div class="weui-cell weui-cell_switch">
    <div class="weui-cell__bd">时间是否生效</div>
    <div class="weui-cell__ft">
      <input class="weui-switch" type="checkbox">
    </div>
  </div>
  <div class="weui-cell oli-weui-calendar">
    <div class="weui-cell__hd"><label for="" class="weui-label">开始日期</label></div>
    <div class="weui-cell__bd">
      <input class="weui-input" type="text" placeholder="选择开始日期"/>
    </div>
    <div class="weui-cell__ft"><i class="weui-icon-cancel"></i></div>
  </div>

  <div class="weui-cell oli-weui-calendar">
    <div class="weui-cell__hd"><label for="" class="weui-label">结束日期</label></div>
    <div class="weui-cell__bd">
      <input class="weui-input" type="text" placeholder="选择结束日期"/>
    </div>
    <div class="weui-cell__ft"><i class="weui-icon-cancel"></i></div>
  </div>
  <div class="weui-cell oli-weui-calendar">
    <div class="weui-cell__hd"><label for="" class="weui-label">排期反馈日期</label></div>
    <div class="weui-cell__bd">
      <input class="weui-input" type="text" placeholder="选择排期反馈日期"/>
    </div>
    <div class="weui-cell__ft"><i class="weui-icon-cancel"></i></div>
  </div>
  <div class="weui-cell oli-weui-calendar">
    <div class="weui-cell__hd"><label for="" class="weui-label">结果反馈日期</label></div>
    <div class="weui-cell__bd">
      <input class="weui-input" type="text" placeholder="选择结果反馈日期"/>
    </div>
    <div class="weui-cell__ft"><i class="weui-icon-cancel"></i></div>
  </div>
</div>


<div class="weui-cells weui-cells_form">
  <div class="weui-cell">
    <div class="weui-cell__hd"><label class="weui-label">风险点</label></div>
    <div class="weui-cell__bd">
      <textarea class="weui-textarea" rows="1"></textarea>
    </div>
  </div>
  <div class="weui-cell">
    <div class="weui-cell__hd"><label class="weui-label">难度点</label></div>
    <div class="weui-cell__bd">
      <textarea class="weui-textarea" rows="1"></textarea>
    </div>
  </div>
  <div class="weui-cell">
    <div class="weui-cell__hd"><label class="weui-label">需协助点</label></div>
    <div class="weui-cell__bd">
      <textarea class="weui-textarea" rows="1"></textarea>
    </div>
  </div>
</div>

<div class="btn-wrapper">
  <a href="javascript:;" class="weui-btn weui-btn_primary">提交</a>
</div>




<!--<div class="weui-cells__tips">底部说明文字底部说明文字</div>-->

<script src="js/jquery-2.1.4.min.js"></script>
<script src="js/fastclick.min.js"></script>
<script>
  $(function () {
    FastClick.attach(document.body);
  });
</script>
<script src="js/jquery-weui.min.js"></script>
<script>
  $(function () {

    $('.weui-textarea').on('input keyup', function () {
      var $this = $(this);

      var minRows = parseInt($this.data('min-rows') || 1);
      var maxRows = parseInt($this.data('max-rows') || 10);

      // 尝试滚动一段距离，如果没有滚动条，scrollTop 还是 0
      if (this.scrollTop == 0) {
        this.scrollTop = 1;
      }

      while (this.scrollTop == 0) {
        if (this.rows > minRows) {
          this.rows--;
        } else {
          break;
        }

        this.scrollTop = 1;
        if (this.rows < maxRows) {
          this.style.overflowY = "hidden";
        }

        if (this.scrollTop > 0) {
          this.rows++;
          break;
        }
      }

      while (this.scrollTop > 0) {
        if (this.rows < maxRows) {
          this.rows++;
          if (this.scrollTop == 0) {
            this.scrollTop = 1;
          }
        } else {
          this.style.overflowY = "auto";
          break;
        }
      }
    });

    // init calendar
    $(".oli-weui-calendar input.weui-input").calendar();

    $(".oli-weui-calendar .weui-icon-cancel").on('click', function() {
      $(this).parent().parent().find('input.weui-input').val('');
    });

  });
</script>

</body>
</html>
