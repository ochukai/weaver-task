(function(b){function c(e,d){d=d||{};var g=this,f=d.query||"> :even";b.extend(g,{$el:e,options:d,sections:[],isAccordion:d.accordion||false,});g.states=[];g.$el.find(f).each(function(){new jQueryCollapseSection(b(this),g)});(function(h){g.$el.on("click","[data-collapse-summary] "+(h.options.clickQuery||""),b.proxy(g.handleClick,h));g.$el.bind("toggle close open",b.proxy(g.handleEvent,h))}(g))}c.prototype={handleClick:function(g,f){g.preventDefault();var f=f||"toggle";var h=this.sections,d=h.length;while(d--){if(b.contains(h[d].$summary[0],g.target)){h[d][f]();break}}},handleEvent:function(d){if(d.target==this.$el.get(0)){return this[d.type]()}this.handleClick(d,d.type)},open:function(d){if(isFinite(d)){return this.sections[d].open()}b.each(this.sections,function(e,f){f.open()})},close:function(d){if(isFinite(d)){return this.sections[d].close()}b.each(this.sections,function(e,f){f.close()})},toggle:function(d){if(isFinite(d)){return this.sections[d].toggle()}b.each(this.sections,function(e,f){f.toggle()})}};function a(d,e){if(!e.options.clickQuery){d.wrapInner('<a href="#"/>')}b.extend(this,{isOpen:false,$summary:d.attr("data-collapse-summary",""),$details:d.next(),options:e.options,parent:e});e.sections.push(this);var f=e.states[this._index()];if(f===0){this.close(true)}else{if(this.$summary.is(".open")||f===1){this.open(true)}else{this.close(true)}}}a.prototype={toggle:function(){this.isOpen?this.close():this.open()},close:function(d){this._changeState("close",d)},open:function(d){var e=this;if(e.options.accordion&&!d){b.each(e.parent.sections,function(f,g){g.close()})}e._changeState("open",d)},_index:function(){return b.inArray(this,this.parent.sections)},_changeState:function(d,e){var f=this;f.isOpen=d=="open";if(b.isFunction(f.options[d])&&!e){f.options[d].apply(f.$details)}else{f.$details[f.isOpen?"show":"hide"]()}f.$summary.toggleClass("open",d!="close");f.$details.attr("aria-hidden",d=="close");f.$summary.attr("aria-expanded",d=="open");f.$summary.trigger(d=="open"?"opened":"closed",f)}};b.fn.extend({collapse:function(f,e){var d=(e)?b("body").find("[data-collapse]"):b(this);return d.each(function(){var h=(e)?{}:f,g=b(this).attr("data-collapse")||"";b.each(g.split(" "),function(k,j){if(j){h[j]=true}});new c(b(this),h)})}});b(function(){b.fn.collapse(false,true)});jQueryCollapse=c;jQueryCollapseSection=a})(window.jQuery);